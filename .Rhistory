library(rvest)
library(tidyr)
library(readr)
library(dplyr)
library(ggplot2)
library(plotly)
i <- 2485 # Antal sidor
snapshot_dt <- as.Date("2018-07-24")
for(i in 2:i) {
print(paste0("Iteration: ", i))
url<- paste0('https://www.blocket.se/hela_sverige?q=&cg=1020&w=3&st=s&ps=&pe=&mys=&mye=&ms=&me=&cxpf=&cxpt=&fu=&gb=&ca=11&l=0&md=th&cp=&o=',i)
webpage <- read_html(url)
titel_html <- html_nodes(webpage, '.item_link')
pris_html <- html_nodes(webpage,'#ps_0 , #item_list .font-large')
typ_html <- html_nodes(webpage, '.motor-li-thumb-extra-info')
# Converting the title data to text
titel <- html_text(titel_html)
pris <- html_text(pris_html)
pris <- pris[-1]
typ <- html_text(typ_html)
alles <- cbind(titel, pris, typ)
df_alles <- as.data.frame(alles)
if(i == 2) {
tot <- df_alles
} else {
tot <- rbind(tot, df_alles)}
}
